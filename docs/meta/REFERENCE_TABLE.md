# üìò REFERENCE\_TABLE.md ‚Äî Refer√™ncia P√∫blica de M√≥dulos Op\_Trader (Definitiva)

Tabela oficial com todos os m√©todos, fun√ß√µes e classes **p√∫blicas, est√°veis e homologadas** do Op\_Trader.
Inclui caminho de importa√ß√£o, assinatura real, retorno, descri√ß√£o, status e link rastre√°vel para o SPEC.

> ‚ö†Ô∏è Todos os elementos aqui listados foram revisados, testados e est√£o @STABLE. N√£o existem entradas nulas.

---

## üß± Pipeline: UTILS

| Import Path                       | Nome                        | Tipo     | Entradas / Assinatura                                                                                                                                                                                                                                                   | Retorno                                                  | Descri√ß√£o                                                          | Estado  | SPEC                                                                           |
| --------------------------------- | --------------------------- | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------- | ------------------------------------------------------------------ | ------- | ------------------------------------------------------------------------------ |
| `src/utils/logging_utils.py`      | `get_logger`                | function | `name: str, cli_level: str = None`                                                                                                                                                                                                                                      | Logger                                                   | Logger estruturado e compat√≠vel                                    | @STABLE | [üìÑ SPEC\_logging\_utils.md](../../docs/specs/SPEC_logging_utils.md)           |
| `src/utils/path_setup.py`         | `ensure_project_root`       | function | `cur_file: str`                                                                                                                                                                                                                                                         | Path                                                     | Adiciona raiz do projeto ao sys.path                               | @STABLE | [üìÑ SPEC\_path\_setup.md](../../docs/specs/SPEC_path_setup.md)                 |
| `src/utils/file_saver.py`         | `get_timestamp`             | function | `None`                                                                                                                                                                                                                                                                  | str                                                      | Gera timestamp para versionamento                                  | @STABLE | [üìÑ SPEC\_file\_saver.md](../../docs/specs/SPEC_file_saver.md)                 |
| `src/utils/file_saver.py`         | `build_filename`            | function | `prefix: str, suffix: str, asset: str, timeframe: str, ...`                                                                                                                                                                                                             | str                                                      | Cria nome de arquivo padronizado                                   | @STABLE | [üìÑ SPEC\_file\_saver.md](../../docs/specs/SPEC_file_saver.md)                 |
| `src/utils/file_saver.py`         | `save_dataframe`            | function | `df: DataFrame, filepath: str`                                                                                                                                                                                                                                          | None                                                     | Salva CSV com log e cria√ß√£o autom√°tica de pastas                   | @STABLE | [üìÑ SPEC\_file\_saver.md](../../docs/specs/SPEC_file_saver.md)                 |
| `src/utils/vecnorm_loader.py`     | `save_vecnormalize`         | function | `env: VecNormalize, path: str`                                                                                                                                                                                                                                          | None                                                     | Salva objeto de normaliza√ß√£o PPO                                   | @STABLE | [üìÑ SPEC\_vecnorm\_loader.md](../../docs/specs/SPEC_vecnorm_loader.md)         |
| `src/utils/vecnorm_loader.py`     | `load_vecnormalize`         | function | `path: str, env: VecEnv`                                                                                                                                                                                                                                                | VecNormalize                                             | Restaura normaliza√ß√£o para ambiente                                | @STABLE | [üìÑ SPEC\_vecnorm\_loader.md](../../docs/specs/SPEC_vecnorm_loader.md)         |
| `src/utils/data_cleaner.py`       | `DataCleaner`               | class    | `debug: bool = False`                                                                                                                                                                                                                                                   | inst√¢ncia                                                | Limpeza e padroniza√ß√£o de DataFrame de candles                     | @STABLE | [üìÑ SPEC\_data\_cleaner.md](../../docs/specs/SPEC_data_cleaner.md)             |
| `src/utils/data_shape_utils.py`   | `load_feature_list`         | function | `filepath: str`                                                                                                                                                                                                                                                         | list\[str]                                               | L√™ lista de features do schema ativo                               | @STABLE | [üìÑ SPEC\_data\_shape\_utils.md](../../docs/specs/SPEC_data_shape_utils.md)    |
| `src/utils/data_shape_utils.py`   | `align_dataframe_to_schema` | function | `df: DataFrame, schema_cols: list[str]`                                                                                                                                                                                                                                 | DataFrame                                                | Alinha colunas e tipos conforme schema                             | @STABLE | [üìÑ SPEC\_data\_shape\_utils.md](../../docs/specs/SPEC_data_shape_utils.md)    |
| `src/utils/feature_calculator.py` | `FeatureCalculator`         | class    | `debug: bool = False`<br>`calculate_all(df: DataFrame, features: Optional[list[str]] = None, params: Optional[dict] = None) -> DataFrame`<br>`list_available_features() -> list[str]`<br>`register_feature(name: str, func: Callable)`<br>`get_last_metadata() -> dict` | inst√¢ncia,<br>DataFrame,<br>list\[str],<br>None,<br>dict | Calculadora plug√°vel de indicadores t√©cnicos e features de candles | @STABLE | [üìÑ SPEC\_feature\_calculator.md](../../docs/specs/SPEC_feature_calculator.md) |
| `src/utils/scaler_utils.py`       | `ScalerUtils`               | class    | `debug: bool = False`                                                                                                                                                                                                                                                   | inst√¢ncia                                                | Normaliza√ß√£o padr√£o com persist√™ncia audit√°vel                     | @STABLE | [üìÑ SPEC\_scaler\_utils.md](../../docs/specs/SPEC_scaler_utils.md)             |
| `src/utils/mt5_connection.py`     | `connect_to_mt5`            | function | `cli_level: Optional[str] = None`                                                                                                                                                                                                                                       | bool                                                     | Conecta ao MetaTrader 5                                            | @STABLE | [üìÑ SPEC\_mt5\_connection.md](../../docs/specs/SPEC_mt5_connection.md)         |
| `src/utils/mt5_connection.py`     | `close_mt5_connection`      | function | `None`                                                                                                                                                                                                                                                                  | None                                                     | Encerra conex√£o MT5 de forma segura                                | @STABLE | [üìÑ SPEC\_mt5\_connection.md](../../docs/specs/SPEC_mt5_connection.md)         |

---

## üß± Pipeline: ENV (ambientes, wrappers e acopladores)

| Import Path                        | Nome                   | Tipo  | Entradas / Assinatura                                      | Retorno   | Descri√ß√£o                                       | Estado    | SPEC                                                                         |
| ---------------------------------- | ---------------------- | ----- | ---------------------------------------------------------- | --------- | ----------------------------------------------- | --------- | ---------------------------------------------------------------------------- |
| `src/env/base_env.py`              | `BaseEnv`              | class | `observation_space, action_space, config=None, ...`        | inst√¢ncia | Ambiente base de RL, contrato de step/reset/log | `@STABLE` | [üìÑ SPEC\_base\_env.md](../../docs/specs/SPEC_base_env.md)                           |
| `src/env/train_env_long.py`        | `TrainEnvLong`         | class | `config: dict, **kwargs`                                   | inst√¢ncia | Ambiente RL para treino principal (long only)   | `@STABLE` | [üìÑ SPEC\_train\_env\_long.md](../../docs/specs/SPEC_train_env_long.md)              |
| `src/env/train_env_short.py`       | `TrainEnvShort`        | class | `config: dict, **kwargs`                                   | inst√¢ncia | Ambiente RL para treino (short only)            | `@STABLE` | [üìÑ SPEC\_train\_env\_short.md](../../docs/specs/SPEC_train_env_short.md)            |
| `src/env/observation_wrapper.py`   | `ObservationWrapper`   | class | `env, log_dir: str = '', debug: bool = False`              | inst√¢ncia | Wrapper: processamento e log de observa√ß√£o      | `@STABLE` | [üìÑ SPEC\_observation\_wrapper.md](../../docs/specs/SPEC_observation_wrapper.md)     |
| `src/env/normalization_wrapper.py` | `NormalizationWrapper` | class | `env, norm_type: str = 'vecnorm', log_dir: str = ''`       | inst√¢ncia | Wrapper: normaliza√ß√£o audit√°vel                 | `@STABLE` | [üìÑ SPEC\_normalization\_wrapper.md](../../docs/specs/SPEC_normalization_wrapper.md) |
| `src/env/logging_wrapper.py`       | `LoggingWrapper`       | class | `env, log_dir: str = '', debug: bool = False`              | inst√¢ncia | Wrapper: logging estruturado e rastre√°vel       | `@STABLE` | [üìÑ SPEC\_logging\_wrapper.md](../../docs/specs/SPEC_logging_wrapper.md)             |
| `src/env/action_wrapper.py`        | `ActionWrapper`        | class | `env, action_space, action_map: dict, debug: bool = False` | inst√¢ncia | Wrapper: processamento/valida√ß√£o de a√ß√µes       | `@STABLE` | [üìÑ SPEC\_action\_wrapper.md](../../docs/specs/SPEC_action_wrapper.md)               |
| `src/env/reward_wrapper.py`        | `RewardWrapper`        | class | `env, reward_config: dict = None, debug: bool = False`     | inst√¢ncia | Wrapper: processamento/valida√ß√£o de rewards     | `@STABLE` | [üìÑ SPEC\_reward\_wrapper.md](../../docs/specs/SPEC_reward_wrapper.md)               |
| `src/env/registry.py`              | `Registry`             | class | `name: str, registry_type: str = 'env'`                    | inst√¢ncia | Registro global de envs e wrappers              | `@STABLE` | [üìÑ SPEC\_registry.md](../../docs/specs/SPEC_registry.md)                            |
| `src/env/env_factory.py`           | `EnvFactory`           | class | `config: dict = None, debug: bool = False`                 | inst√¢ncia | F√°brica e orquestrador de ambientes RL          | `@STABLE` | [üìÑ SPEC\_env\_factory.md](../../docs/specs/SPEC_env_factory.md)                     |

---

## üß± Pipeline: LOGGERS E GESTORES

| Import Path                       | Nome              | Tipo  | Entradas / Assinatura                    | Retorno   | Descri√ß√£o                      | Estado    | SPEC                                                               |
| --------------------------------- | ----------------- | ----- | ---------------------------------------- | --------- | ------------------------------ | --------- | ------------------------------------------------------------------ |
| `src/loggers/trade_logger.py`     | `TradeLogger`     | class | `log_dir: str = '', debug: bool = False` | inst√¢ncia | Logger estruturado para trade  | `@STABLE` | [üìÑ SPEC\_trade\_logger.md](../../docs/specs/SPEC_trade_logger.md)         |
| `src/manager/position_manager.py` | `PositionManager` | class | `symbol: str, risk: float = 1.0`         | inst√¢ncia | Gestor de posi√ß√µes de trading  | `@STABLE` | [üìÑ SPEC\_position\_manager.md](../../docs/specs/SPEC_position_manager.md) |
| `src/manager/risk_manager.py`     | `RiskManager`     | class | `config: dict, debug: bool = False`      | inst√¢ncia | Gestor de risco parametriz√°vel | `@STABLE` | [üìÑ SPEC\_risk\_manager.md](../../docs/specs/SPEC_risk_manager.md)         |

---

## üß± Pipeline: REWARD, OBSERVATION & UTILS RL

| Import Path                              | Nome                 | Tipo  | Entradas / Assinatura                      | Retorno   | Descri√ß√£o                          | Estado    | SPEC                                                                     |
| ---------------------------------------- | -------------------- | ----- | ------------------------------------------ | --------- | ---------------------------------- | --------- | ------------------------------------------------------------------------ |
| `src/reward/reward_aggregator.py`        | `RewardAggregator`   | class | `reward_config: dict, debug: bool = False` | inst√¢ncia | Agregador e auditor de rewards     | `@STABLE` | [üìÑ SPEC\_reward\_aggregator.md](../../docs/specs/SPEC_reward_aggregator.md)     |
| `src/observation/observation_builder.py` | `ObservationBuilder` | class | `schema: dict, debug: bool = False`        | inst√¢ncia | Builder customiz√°vel de observa√ß√£o | `@STABLE` | [üìÑ SPEC\_observation\_builder.md](../../docs/specs/SPEC_observation_builder.md) |

---

## üß± Pipeline: VALIDADORES

| Import Path                    | Nome         | Tipo  | Entradas / Assinatura               | Retorno   | Descri√ß√£o                            | Estado    | SPEC                                                  |
| ------------------------------ | ------------ | ----- | ----------------------------------- | --------- | ------------------------------------ | --------- | ----------------------------------------------------- |
| `src/validators/validators.py` | `Validators` | class | `schema: dict, debug: bool = False` | inst√¢ncia | Validadores de consist√™ncia e schema | `@STABLE` | [üìÑ SPEC\_validators.md](../../docs/specs/SPEC_validators.md) |

---

## üß± Pipeline: ACOPLAMENTO & PIPELINES

| Import Path                   | Nome                             | Tipo     | Entradas / Assinatura  | Retorno | Descri√ß√£o                                | Estado    | SPEC                                                                                            |
| ----------------------------- | -------------------------------- | -------- | ---------------------- | ------- | ---------------------------------------- | --------- | ----------------------------------------------------------------------------------------------- |
| `src/pipeline/acoplamento.py` | `acoplamento_pipeline_ambientes` | doc/spec | `ver README.md e SPEC` | ‚Äî       | Guia de integra√ß√£o entre pipelines RL/SL | `@STABLE` | [üìÑ SPEC\_acoplamento\_pipeline\_ambientes.md](../../docs/specs/SPEC_acoplamento_pipeline_ambientes.md) |

---

üè∑Ô∏è *Consulte [TAGS\_INDEX.md](TAGS_INDEX.md) para interpreta√ß√£o das TAGs.*
